

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Introduction and Setup &mdash; pysqlc 0.1.5 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="pysqlc.DB — reference" href="Reference.html" />
    <link rel="prev" title="Welcome to pysqlc documentation" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> pysqlc
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Introduction and Setup</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#quickstart">Quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ways-to-authenticate">Ways to authenticate</a></li>
<li class="toctree-l2"><a class="reference internal" href="#custom-configuration">Custom Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#specifying-environments">Specifying environments</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dev-mode">Dev mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#note-on-values-input">Note on <code class="docutils literal notranslate"><span class="pre">values</span></code> input</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Reference.html"><code class="docutils literal notranslate"><span class="pre">pysqlc.DB</span></code> — reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="methods.html">pysqlc Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="methods.html#note">NOTE:</a></li>
<li class="toctree-l1"><a class="reference internal" href="licence.html">Licence</a></li>
<li class="toctree-l1"><a class="reference internal" href="licence.html#contact">Contact</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pysqlc</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Introduction and Setup</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/sergegoussev/pysql/blob/master/README.md" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="introduction-and-setup">
<h1>Introduction and Setup<a class="headerlink" href="#introduction-and-setup" title="Permalink to this headline">¶</a></h1>
<p><strong>pysqlc</strong>, works by (1) connecting to a database of your choice, and (2) executing a <code class="docutils literal notranslate"><span class="pre">SQL</span></code> query on it. Authentication, utilization of cursors (and other SQL things) are done for you.</p>
<p><strong>supported</strong>:</p>
<ul class="simple">
<li>Python 2.7, 3.x</li>
<li>MySQL 5.7, 8.0</li>
<li>SQL Server 2012, 2016</li>
</ul>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>At this point, <strong>pysqlc</strong> is not hosted on PyPI, so to install the library you need to download it from github. There are two ways you can do this, you can go to its <a class="reference external" href="https://github.com/sergegoussev/pysqlc">github repo</a>, download it/clone it locally, and install using using pip (locally):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pip</span> <span class="n">install</span> <span class="o">.</span>
</pre></div>
</div>
<p>or alternatively via pip and git directly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pip</span> <span class="n">install</span> <span class="n">git</span><span class="o">+</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">sergegoussev</span><span class="o">/</span><span class="n">pysqlc</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
</div>
<div class="section" id="quickstart">
<h2>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline">¶</a></h2>
<p>To use the library - you first have to connect to your database by initiating the <code class="docutils literal notranslate"><span class="pre">DB</span></code> object, and then write SQL for whatever you are trying to do using <code class="docutils literal notranslate"><span class="pre">DB.query(&quot;&quot;)</span></code>. That’s it!</p>
<p>When initiating the connection, you can either enter your login info manually, or utilize <strong>pysqlc</strong>’s <em>environment variable</em> approach (similar to the approach used by Google APIs). The below example to connect and extract some data from your database assumes you have setup an <em>environmental variable</em> for the library to use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pysqlc</span> <span class="kn">import</span> <span class="n">DB</span>

<span class="c1">#connect to the database you want</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">DB</span><span class="p">(</span><span class="n">db_name</span><span class="o">=</span><span class="s1">&#39;testdb&#39;</span><span class="p">,</span> <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;prod&quot;</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="s2">&quot;yourname&quot;</span><span class="p">,</span> <span class="p">)</span>

<span class="c1">#write your SQL query as a string</span>
<span class="n">q</span> <span class="o">=</span> <span class="s2">&quot;SELECT * FROM table;&quot;</span>

<span class="c1">#and get the data back using one simple function</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="ways-to-authenticate">
<h2>Ways to authenticate<a class="headerlink" href="#ways-to-authenticate" title="Permalink to this headline">¶</a></h2>
<p>To make connections, there are 2 options:</p>
<ol class="simple">
<li>You can set up an <em>environmental variable</em> to not have to pass any login information every time you use the library (<em>recommended</em>); or</li>
<li>Choose to specify username/password manually.</li>
</ol>
<p>To follow the environmental variable approach (works the same way as <a class="reference external" href="https://cloud.google.com/deployment-manager/docs/configuration/templates/use-environment-variables">google cloud environmental variables</a>, which points to a json on your computer), create a ‘SQL_LOGIN’ variable on your PC and point it to a .json file somewhere on your computer. The JSON file must follow the below structure with the name of the environment you are connecting to, and the various connection requirements:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="p">{</span>
    	<span class="s2">&quot;prod&quot;</span><span class="p">:{</span>
    		<span class="s2">&quot;dbtype&quot;</span><span class="p">:</span><span class="s2">&quot;MySQL&quot;</span><span class="p">,</span>
    		<span class="s2">&quot;host&quot;</span><span class="p">:</span><span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
    		<span class="s2">&quot;charset&quot;</span><span class="p">:</span><span class="s2">&quot;utf8mb4&quot;</span><span class="p">,</span>
    		<span class="s2">&quot;username&quot;</span><span class="p">:</span><span class="s2">&quot;uid&quot;</span><span class="p">,</span>
    		<span class="s2">&quot;password&quot;</span><span class="p">:</span><span class="s2">&quot;psw&quot;</span>
    	<span class="p">}</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>You can specify several environments, just add others as needed. Its recommended to set the default environment you will use as “prod” — this way you will not need to specify this environment every time when connecting.</p>
<ul>
<li><p class="first">specify either “MySQL” or “SQL Server” under dbtype;</p>
</li>
<li><p class="first">“password” section can be ommited. If it is not included, the <strong>pysqlc</strong> will ask for the password every time the connection is made (or alternatively look for it to be passed into the DB object upon initiation):</p>
<p><strong>Examples</strong>:</p>
<p>If password ommited from local variable json and <strong>not</strong> specified in code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pysqlc</span> <span class="kn">import</span> <span class="n">DB</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">DB</span><span class="p">(</span><span class="s1">&#39;testdb&#39;</span><span class="p">)</span>
<span class="n">Enter</span> <span class="n">password</span> <span class="n">to</span> <span class="n">login</span> <span class="n">to</span> <span class="n">the</span> <span class="n">database</span> <span class="n">server</span><span class="p">:</span> <span class="c1">#prompt</span>
<span class="s1">&#39;****&#39;</span>
<span class="n">Successfully</span> <span class="n">connected</span> <span class="n">to</span> <span class="n">testdb</span>
</pre></div>
</div>
<p>If password ommited from local variable json, but specified in code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pysqlc</span> <span class="kn">import</span> <span class="n">DB</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">DB</span><span class="p">(</span><span class="s1">&#39;testdb&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;pass&#39;</span><span class="p">)</span>
<span class="n">Successfully</span> <span class="n">connected</span> <span class="n">to</span> <span class="n">testdb</span>
</pre></div>
</div>
<p>If password included in json:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pysqlc</span> <span class="kn">import</span> <span class="n">DB</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">DB</span><span class="p">(</span><span class="s1">&#39;testdb&#39;</span><span class="p">)</span>
<span class="n">Successfully</span> <span class="n">connected</span> <span class="n">to</span> <span class="n">testdb</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="custom-configuration">
<h2>Custom Configuration<a class="headerlink" href="#custom-configuration" title="Permalink to this headline">¶</a></h2>
<div class="section" id="specifying-environments">
<h3>Specifying environments<a class="headerlink" href="#specifying-environments" title="Permalink to this headline">¶</a></h3>
<p>If you have setup your <code class="docutils literal notranslate"><span class="pre">JSON</span></code> file to point towards multiple environments, you can specify the environment of interest upon initating the <code class="docutils literal notranslate"><span class="pre">DB()</span></code> object by utilizing the <code class="docutils literal notranslate"><span class="pre">env_name</span></code> parameter:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pysqlc</span> <span class="kn">import</span> <span class="n">DB</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">DB</span><span class="p">(</span><span class="n">db_name</span><span class="o">=</span><span class="s1">&#39;testdb&#39;</span><span class="p">,</span> <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;dev&quot;</span><span class="p">)</span>
<span class="n">Successfully</span> <span class="n">connected</span> <span class="n">to</span> <span class="n">testdb</span>
</pre></div>
</div>
<p>By default, <code class="docutils literal notranslate"><span class="pre">env_name</span></code> is set to <code class="docutils literal notranslate"><span class="pre">'prod'</span></code></p>
<p><strong>Troubleshooting</strong></p>
<p>The order of arguments when specifying DB object is <code class="docutils literal notranslate"><span class="pre">db(db_name=&quot;&quot;,</span> <span class="pre">env_name='prod',</span> <span class="pre">...)</span></code>, hence make sure to specify the <code class="docutils literal notranslate"><span class="pre">env_name</span></code> variable as the type of variable you are entering. For example if you specify <code class="docutils literal notranslate"><span class="pre">db('dev')</span></code> for dev environment, <strong>pysqlc</strong> will look for the <code class="docutils literal notranslate"><span class="pre">dev</span></code> database on the <code class="docutils literal notranslate"><span class="pre">prod</span></code> (default) environment</p>
</div>
<div class="section" id="dev-mode">
<h3>Dev mode<a class="headerlink" href="#dev-mode" title="Permalink to this headline">¶</a></h3>
<p><strong>pysqlc</strong> has the ability to print the result of every query statement to give you more visibility of what is going on. If you want to enable it, you can turn it on during initiation:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pysqlc</span> <span class="kn">import</span> <span class="n">DB</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">DB</span><span class="p">(</span><span class="n">db_name</span><span class="o">=</span><span class="s1">&#39;testdb&#39;</span><span class="p">,</span> <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;dev&quot;</span><span class="p">,</span> <span class="n">dev_mode</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>By default, <code class="docutils literal notranslate"><span class="pre">dev_mode=False</span></code>. The library will still print out major notifications (errors, DB connections, etc).</p>
</div>
<div class="section" id="note-on-values-input">
<h3>Note on <code class="docutils literal notranslate"><span class="pre">values</span></code> input<a class="headerlink" href="#note-on-values-input" title="Permalink to this headline">¶</a></h3>
<p>When inputting data into the <code class="docutils literal notranslate"><span class="pre">values</span></code> parameter, always passed in as a list (even if there is only one value):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">q1</span> <span class="o">=</span> <span class="s2">&quot;REPLACE INTO table (name) VALUES (</span><span class="si">%s</span><span class="s2">);&quot;</span>
<span class="n">db</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">query</span><span class="o">=</span><span class="n">q1</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;John Smith&#39;</span><span class="p">],</span> <span class="n">q_type</span><span class="o">=</span><span class="s1">&#39;REPLACE&#39;</span><span class="p">)</span>

<span class="c1">#or multiple data values:</span>
<span class="n">q2</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    UPDATE table</span>
<span class="s2">    SET number=</span><span class="si">%s</span><span class="s2"></span>
<span class="s2">    WHERE userid=&#39;</span><span class="si">%s</span><span class="s2">&#39;;</span>
<span class="s2">    &quot;&quot;&quot;</span>
<span class="n">db</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">query</span><span class="o">=</span><span class="n">q2</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="mi">123</span><span class="p">,</span> <span class="s1">&#39;john-123&#39;</span><span class="p">],</span> <span class="n">q_type</span><span class="o">=</span><span class="s2">&quot;UPDATE&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Reference.html" class="btn btn-neutral float-right" title="pysqlc.DB — reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to pysqlc documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, @sergegoussev

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>